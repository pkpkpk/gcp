# GCP Class Categories

This document lists the categories used by the GCP library analyzer to classify Java classes in the Google Cloud Java client libraries. The categorization logic is primarily located in `gcp.dev.analyzer.javaparser.ast/categorize-class`.

## Categories

### `:enum`
**Criteria:**
- Must be an instance of `EnumDeclaration`.
- Matches standard Java enums.

### `:string-enum`
**Criteria:**
- Must be a `ClassOrInterfaceDeclaration`.
- Must extend the `StringEnumValue` class.
- Typically represents an enum-like value that is backed by a String, allowing for forward compatibility.

### `:functional-interface`
**Criteria:**
- Must be an interface (`.isInterface`).
- Must have exactly one abstract method (excluding methods from `Object` like `toString`, `equals`, `hashCode`).
- Represents types that can be used as lambdas.

### `:stub`
**Criteria:**
- Name ends with "Stub".
- Represents low-level transport abstractions (often generated by GAPIC) that are generally not used directly by end-users.

### `:client`
**Criteria:**
- **Name:** Does NOT end with "Options", "Exception", "Factory", "Provider", or "Settings".
- **Lifecycle:** 
  - Has lifecycle methods: `close`, `shutdown`, `shutdownNow`, `startAsync`, or `stopAsync`.
  - **OR** extends/implements: `ApiService`, `Service`, `AutoCloseable`, or `Closeable`.
- Represents the main service client (e.g., `BigQuery`, `Storage`, `TopicAdminClient`).

### `:interface`
**Criteria:**
- Must be an interface (`.isInterface`).
- Fallback for interfaces that are not functional interfaces or clients.

### `:abstract-union`
**Criteria:**
- Must be a `ClassOrInterfaceDeclaration`.
- **Abstract:** Must be abstract (`.isAbstract`).
- **Union Check:** Has a `getType()` method that returns a type named `Type` (or ending in `.Type`) which is a `ClassOrInterfaceType` (likely an enum).
- Represents a sealed hierarchy or union type (e.g., `TableDefinition` which can be `StandardTableDefinition`, `ViewDefinition`, etc.).

### `:concrete-union`
**Criteria:**
- Must be a `ClassOrInterfaceDeclaration`.
- **Not Abstract:** Must NOT be abstract.
- **Union Check:** Has a `getType()` method that returns a `Type` enum (same logic as `:abstract-union`).
- Represents a concrete class that behaves like a union but doesn't have subclasses for variants (less common).

### `:exception`
**Criteria:**
- Name ends with "Exception".

### `:error`
**Criteria:**
- Name ends with "Error".

### `:resource-extended-class`
**Criteria:**
- Must be a `ClassOrInterfaceDeclaration`.
- Extends a class ending in "Info" (e.g., `Table` extends `TableInfo`).
- Represents a resource class that adds behavior (methods) on top of a pure data configuration class ("Info").

### `:accessor-with-builder`
**Criteria:**
- Must be a `ClassOrInterfaceDeclaration`.
- Has a nested member class named ending in "Builder".
- Represents the most common pattern for immutable data classes in the library (e.g., `TableInfo`, `DatasetInfo`).

### `:builder`
**Criteria:**
- Name ends with "Builder".
- Represents the builder class itself (usually nested, but categorized if processed independently).

### `:static-factory`
**Criteria:**
- Must be a `ClassOrInterfaceDeclaration`.
- Not an interface.
- **No Public Constructors:** Has zero public constructors.
- **Static Factory Method:** Has a `static` method named `of` that returns the class type itself.
- Represents value types created via static factories (e.g., `TableId`, `DatasetId`).
- **Distinction from `:factory`:** These classes construct *themselves* (Value Object pattern).

### `:factory`
**Criteria:**
- Must be a `ClassOrInterfaceDeclaration`.
- Not an interface.
- **No Public Constructors:** Has zero public constructors.
- **Naming Pattern:** Name ends with "Configs", "Roles", "Factory", or "Factories".
- Represents a namespace or provider for creating instances of *other* types or accessing constants (e.g., `BlobWriteSessionConfigs`, `StorageRoles`).
- **Distinction from `:static-factory`:** These classes are factories *for* other types, not value objects constructing themselves.

### `:statics`
**Criteria:**
- Must be a `ClassOrInterfaceDeclaration`.
- Not an interface.
- Not abstract.
- **No Public Constructors:** Has zero public constructors.
- **All Static:** All methods and fields are `static`.
- **Not Empty:** Must have at least one method or field (distinguishes from `:sentinel`).
- Represents a utility class or static namespace that provides helper functions or constants (e.g., `StorageChannelUtils`).

### `:pojo`
**Criteria:**
- Must be a `ClassOrInterfaceDeclaration`.
- Not an interface.
- Not abstract.
- **Public Constructors:** Has at least one public constructor.
- **No Builder:** Does not have a nested Builder class (otherwise it would be `:accessor-with-builder`).
- Represents plain data objects constructed directly via a plain constructor, distinguishing them from builders or static factories.

### `:abstract`
**Criteria:**
- Must be a `ClassOrInterfaceDeclaration`.
- Must be abstract (`.isAbstract`).
- Fallback for abstract classes that are not abstract unions.

### `:union-variant`
**Criteria:**
- Must be a `ClassOrInterfaceDeclaration`.
- Extends a class named `Entity`.
- Represents a specific variant in a union (specifically for `Entity` based unions, though this seems specific to certain patterns).

### `:sentinel`
**Criteria:**
- Must be a `ClassOrInterfaceDeclaration`.
- Not an interface.
- Not abstract.
- **No Public Constructors:** Has zero public constructors.
- **Empty:** Has NO fields and NO methods.
- Represents a marker or sentinel type that conveys meaning solely by its existence (e.g., `AbortMultipartUploadResponse`).

### `:read-only`
**Criteria:**
- Must be a `ClassOrInterfaceDeclaration`.
- Not an interface.
- Not abstract.
- **No Public Constructors:** Has zero public constructors.
- **Has Instance Methods:** Has at least one non-static (instance) method.
- Represents immutable response objects or handles that are created internally by the library and exposed to the user, but cannot be instantiated or built by the user (e.g., `JobStatus`, `InsertAllResponse`).

### `:other`
**Criteria:**
- Any class that does not fit into the above categories.
- Classes falling here will generate a warning during analysis.
- **Goal:** This category should ideally be empty (count of 0) for all analyzed packages.

## Filtered / Ignored Classes
The analyzer automatically filters out:
- Classes in any package containing `.spi.` (Service Provider Interface).
- Classes annotated with `@InternalApi` or `@InternalExtensionOnly`.
- Classes whose name ends with `Serializer` (internal serialization helpers).
- Annotation declarations.
- Classes in directories matching `src/test` (test artifacts).
- Classes annotated with `@Deprecated`.